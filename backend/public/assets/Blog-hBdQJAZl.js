import{_ as k,o as s,c as i,a as t,t as r,u as p,q as A,h as f,w as u,B as h,j as g,s as N,F as w,i as B,p as $,b as I,v as E,r as v,d as P,f as y,x as V,g as _,y as F,z as L,A as T,m as b}from"./index-8hsSbLV0.js";import{B as j}from"./BaseLayout--Dqu_lrp.js";const S=e=>($("data-v-43d6ac47"),e=e(),I(),e),z={class:"title"},M={key:0,class:"btns"},O=S(()=>t("svg",null,[t("use",{href:"#edit"})],-1)),q=S(()=>t("svg",null,[t("use",{href:"#delete"})],-1)),G={class:"body"},J={class:"footer"},R={key:0,class:"tags"},H={__name:"Preview",props:{item:Object,placeholder:Boolean},emits:["edit","delete"],setup(e,{emit:m}){const n=m;return(c,a)=>(s(),i("div",{class:"thumb",onClick:a[2]||(a[2]=o=>c.$router.push({path:`/blog/${e.item.id}`}))},[t("div",z,[t("h4",null,r(e.item.title),1),p(A)?(s(),i("div",M,[f(h,{icon:"",def:!1,onClick:a[0]||(a[0]=o=>{o.stopPropagation(),n("edit")})},{default:u(()=>[O]),_:1}),f(h,{icon:"",def:!1,onClick:a[1]||(a[1]=o=>{o.stopPropagation(),n("delete")})},{default:u(()=>[q]),_:1})])):g("",!0)]),t("div",G,[t("p",null,r(e.item.description),1)]),t("div",J,[t("h5",null,r(p(N)(e.item.updated_at)),1),e.item.tags?(s(),i("div",R,[(s(!0),i(w,null,B(JSON.parse(e.item.tags),o=>(s(),i("div",{class:"tag",key:o},[t("label",null,r(o),1)]))),128))])):g("",!0)])]))}},K=k(H,[["__scopeId","data-v-43d6ac47"]]),Q=e=>($("data-v-ce3c5c65"),e=e(),I(),e),U=Q(()=>t("h2",{class:"bottom-48"},[_(" Sharing is the best way to learn."),t("br"),_(" That's why I decided to keep track of my progresses building a li'l blog from scratch ")],-1)),W={key:1,class:"error-msg"},X={key:2},Y={__name:"Blog",setup(e){const m=E(),n=v([]),c=v(!1);async function a(){const l=await V();l.code==200?(n.value=[...l.data],c.value=!1):c.value=!0}function o(l){m.push({name:"update",params:{id:l.id}})}async function x(l){(await T({id:l.id})).code==200?(b({msg:"Article deleted",time:5e3}),await a()):b({msg:"Failed to delete article",time:5e3})}return P(async()=>{await a()}),(l,C)=>(s(),y(j,null,{title:u(()=>[_("Blog")]),default:u(()=>[U,t("div",{class:F(["articles",{mobile:p(L)}])},[n.value.length?(s(!0),i(w,{key:0},B(n.value,d=>(s(),y(K,{key:d.id,item:d,onEdit:D=>o(d),onDelete:D=>x(d)},null,8,["item","onEdit","onDelete"]))),128)):c.value?(s(),i("p",W,"Impossible to fetch articles")):(s(),i("p",X,"Loading..."))],2)]),_:1}))}},te=k(Y,[["__scopeId","data-v-ce3c5c65"]]);export{te as default};
