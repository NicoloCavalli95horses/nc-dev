import{_ as H,C as j,r as n,k as C,d as G,D as J,o as b,f as K,w as d,g as B,a as e,h as o,I as w,E as O,B as p,t as k,c as T,F as R,i as q,j as z,G as P,m as y,H as Q,J as W,p as X,b as Y}from"./index-8hsSbLV0.js";import{B as Z}from"./BaseLayout--Dqu_lrp.js";const u=x=>(X("data-v-7e3b385a"),x=x(),Y(),x),ee={class:"main-content"},te={class:"left"},ae={class:"header"},se={class:"row"},le=u(()=>e("h4",null,"Title",-1)),oe={class:"row"},ne=u(()=>e("h4",null,"Tags",-1)),ie={class:"row"},de=u(()=>e("h4",null,"Description",-1)),ue={class:"body"},ce=u(()=>e("h4",null,"Body",-1)),ve={class:"btns"},re=u(()=>e("svg",null,[e("use",{href:"#format-bold"})],-1)),pe=u(()=>e("svg",null,[e("use",{href:"#code"})],-1)),fe=u(()=>e("svg",null,[e("use",{href:"#list-dot"})],-1)),_e=u(()=>e("svg",null,[e("use",{href:"#new-line"})],-1)),he={class:"right"},ge={key:0,class:"tags"},me=["onClick"],xe={class:"top-12 bottom-24"},be=["innerHTML"],we={class:"fixed-btns"},ke={__name:"Editor",props:{article:{type:Object,default:()=>({})}},setup(x){const A=j(),c=n(""),v=n(""),f=n(""),l=n([]),_=n(void 0),i=n(""),h=n(!1),r=n(!1),g=n(!1),I=C(()=>h.value?"bold":r.value?"code":g.value?"list":""),E=C(()=>c.value&&v.value&&l.value.length&&f.value.length),m=C(()=>{var t;return(t=A.params)==null?void 0:t.id});function N(t){l.value[t]&&l.value.splice(t,1)}function S(){f.value+=" "+U(I.value),i.value="",h.value=!1,r.value=!1}function U(t){return g.value?`<ul><li class="${t}">${i.value}</li></ul>`:r.value?`<div class="${t}">${i.value}</div>`:`<span class="${t}">${i.value}</span>`}async function D(){if(m.value){await F();return}await L()}async function F(){(await P({id:m.value,title:c.value,description:v.value,tags:l.value,content:f.value})).code==200?y({msg:"Article edited",time:5e3}):y({msg:"Failed to update article",time:5e3}),$()}async function L(){(await Q({title:c.value,description:v.value,tags:l.value,content:f.value})).code==200?y({msg:"Article saved",time:5e3}):y({msg:"Failed to save new article",time:5e3}),$()}function $(){W.push({name:"blog"})}function M(){_.value&&(l.value.push(_.value),_.value=void 0)}return G(async()=>{if(!m.value)return;const t=await J({id:m.value});t.code==200&&(c.value=t.data.title,v.value=t.data.description,i.value=t.data.content,l.value=JSON.parse(t.data.tags))}),(t,a)=>(b(),K(Z,null,{title:d(()=>[B("Editor")]),default:d(()=>[e("div",ee,[e("div",te,[e("div",ae,[e("div",se,[le,o(w,{placeholder:"title",text:c.value,"onUpdate:text":a[0]||(a[0]=s=>c.value=s)},null,8,["text"])]),e("div",oe,[ne,o(w,{placeholder:"tag",text:_.value,"onUpdate:text":a[1]||(a[1]=s=>_.value=s),disabled:l.value.length==3,onKeydown:O(M,["enter"])},null,8,["text","disabled"])]),e("div",ie,[de,o(w,{placeholder:"description",type:"textarea",text:v.value,"onUpdate:text":a[2]||(a[2]=s=>v.value=s)},null,8,["text"])])]),e("div",ue,[ce,e("div",ve,[o(p,{icon:"",def:h.value,onClick:a[3]||(a[3]=s=>h.value=!h.value)},{default:d(()=>[re]),_:1},8,["def"]),o(p,{icon:"",def:r.value,onClick:a[4]||(a[4]=s=>r.value=!r.value)},{default:d(()=>[pe]),_:1},8,["def"]),o(p,{icon:"",def:g.value,onClick:a[5]||(a[5]=s=>g.value=!g.value)},{default:d(()=>[fe]),_:1},8,["def"]),o(p,{icon:"",onClick:a[6]||(a[6]=s=>i.value+="<br>")},{default:d(()=>[_e]),_:1})]),o(w,{placeholder:"description",type:"textarea",text:i.value,"onUpdate:text":a[7]||(a[7]=s=>i.value=s)},null,8,["text"]),o(p,{class:"align-right",def:!1,onClick:S},{default:d(()=>[B("Append")]),_:1})])]),e("div",he,[e("h3",null,k(c.value),1),l.value.length?(b(),T("div",ge,[(b(!0),T(R,null,q(l.value,(s,V)=>(b(),T("div",{class:"tag",key:s,onClick:ye=>N(V)},[e("label",null,k(s),1)],8,me))),128))])):z("",!0),e("h4",xe,k(v.value),1),e("div",{innerHTML:f.value},null,8,be)]),e("div",we,[o(p,{onClick:D,disabled:!E.value},{default:d(()=>[B(k(m.value?"edit":"save new"),1)]),_:1},8,["disabled"])])])]),_:1}))}},Te=H(ke,[["__scopeId","data-v-7e3b385a"]]);export{Te as default};
